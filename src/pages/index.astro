---
// src/pages/index.astro
import { SITE, PROJECTS, SKILLS } from '../config';
import { Icon } from 'astro-icon/components';

const pageTitle = `${SITE.name} | ${SITE.role}`;
---

<html lang="es" class="scroll-smooth">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>{pageTitle}</title>
		<meta name="description" content={SITE.description} />

		<script is:inline>
			const theme = (() => {
				if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
					return localStorage.getItem('theme');
				}
				if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
					return 'dark';
				}
				return 'light';
			})();
		
			if (theme === 'dark') {
				document.documentElement.classList.add('dark');
			} else {
				document.documentElement.classList.remove('dark');
			}
		</script>
	</head>
	
	<body class="bg-white text-slate-900 dark:bg-black dark:text-white transition-colors duration-300 selection:bg-blue-500 selection:text-white">

		<header class="fixed w-full top-0 z-50 bg-white/80 dark:bg-black/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800">
			<div class="max-w-5xl mx-auto px-4 h-16 flex items-center justify-between">
				<a href="#" class="text-xl font-bold tracking-tight hover:text-blue-600 dark:hover:text-blue-400 transition">
					{SITE.name}
				</a>

				<div class="flex items-center gap-4">
					<div class="hidden sm:flex gap-2 border-r border-slate-200 dark:border-slate-800 pr-4 mr-2">
						<a href={SITE.github} target="_blank" class="p-2 text-slate-600 dark:text-slate-400 hover:text-black dark:hover:text-white transition">
							<Icon name="simple-icons:github" class="w-5 h-5" />
						</a>
						<a href={SITE.linkedin} target="_blank" class="p-2 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition">
							<Icon name="simple-icons:linkedin" class="w-5 h-5" />
						</a>
					</div>

					<button id="theme-toggle" class="p-2 rounded-full bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-yellow-400 hover:bg-slate-200 dark:hover:bg-slate-800 transition ring-1 ring-slate-200 dark:ring-slate-800" aria-label="Cambiar tema">
						<Icon name="lucide:sun" class="w-5 h-5 hidden dark:block" />
						<Icon name="lucide:moon" class="w-5 h-5 block dark:hidden text-slate-600" />
					</button>
				</div>
			</div>
		</header>

		<main class="max-w-5xl mx-auto px-4 pt-32 pb-20">
			
			<section class="mb-24 animate-fade-in-up">
				<span class="inline-block py-1 px-3 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-sm font-medium mb-6">
					Disponible para proyectos
				</span>
				<h1 class="text-5xl md:text-7xl font-extrabold tracking-tight mb-6">
					{SITE.role} <br />
					<span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400">
						Freelancer.
					</span>
				</h1>
				<p class="text-xl text-slate-600 dark:text-slate-400 max-w-2xl leading-relaxed mb-8">
					{SITE.description}
				</p>
				
				<div class="flex flex-wrap gap-3">
					{SKILLS.map((skill) => (
						<span class="px-4 py-2 rounded-lg bg-slate-100 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-sm font-medium text-slate-700 dark:text-slate-300 hover:border-blue-500 dark:hover:border-blue-500 transition cursor-default">
							{skill}
						</span>
					))}
				</div>
			</section>

			<section id="proyectos">
				<h2 class="text-3xl font-bold mb-12 flex items-center gap-3">
					<Icon name="lucide:code-2" class="text-blue-600 dark:text-blue-400" />
					Proyectos Destacados
				</h2>

				<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
					{PROJECTS.map((project) => (
						<article class="group relative bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-2xl overflow-hidden hover:shadow-2xl dark:hover:shadow-blue-900/10 hover:-translate-y-1 transition duration-300 flex flex-col h-full">
							
							<div class="aspect-video bg-slate-100 dark:bg-slate-900 relative overflow-hidden group-hover:border-b border-slate-200 dark:border-slate-800">
								<div class="absolute inset-0 flex items-center justify-center text-slate-300 dark:text-slate-800">
									<Icon name="lucide:image" class="w-16 h-16 opacity-50" />
								</div>
								<img 
									src={project.image} 
									alt={project.title} 
									class="absolute inset-0 w-full h-full object-cover transition duration-500 group-hover:scale-105"
									onerror="this.style.display='none'" 
								/>
							</div>

							<div class="p-6 flex flex-col flex-grow">
								<h3 class="text-xl font-bold mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition">
									{project.title}
								</h3>
								<p class="text-slate-600 dark:text-slate-400 text-sm mb-6 flex-grow">
									{project.description}
								</p>

								<div class="mt-auto">
									<div class="flex flex-wrap gap-2 mb-4">
										{project.tags.map(tag => (
											<span class="text-xs font-medium px-2 py-1 rounded bg-slate-100 dark:bg-slate-900 text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-800">
												{tag}
											</span>
										))}
									</div>
									
									<div class="flex gap-4 pt-4 border-t border-slate-100 dark:border-slate-800">
										<a href={project.github} target="_blank" class="flex items-center gap-2 text-sm font-semibold text-slate-700 dark:text-slate-300 hover:text-black dark:hover:text-white transition">
											<Icon name="simple-icons:github" class="w-4 h-4" /> Code
										</a>
										<a href={project.demo} class="flex items-center gap-2 text-sm font-semibold text-blue-600 dark:text-blue-400 hover:underline">
											<Icon name="lucide:external-link" class="w-4 h-4" /> Live Demo
										</a>
									</div>
								</div>
							</div>
						</article>
					))}
				</div>
			</section>
		</main>

		<footer class="border-t border-slate-200 dark:border-slate-800 py-12 text-center bg-slate-50 dark:bg-black">
			<div class="flex justify-center gap-6 mb-8">
				<a href={`mailto:${SITE.email}`} class="flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition font-medium">
					<Icon name="lucide:mail" class="w-5 h-5" />
					Contáctame
				</a>
			</div>
			<p class="text-slate-500 dark:text-slate-600 text-sm">
				© {new Date().getFullYear()} {SITE.name}. Construido con Astro & Tailwind.
			</p>
		</footer>

		<script is:inline>
			const handleToggleClick = () => {
				const element = document.documentElement;
				element.classList.toggle("dark");

				const isDark = element.classList.contains("dark");
				localStorage.setItem("theme", isDark ? "dark" : "light");
			}

			document.getElementById("theme-toggle").addEventListener("click", handleToggleClick);
		</script>
	</body>
</html>